!function(){"use strict";angular.module("HousePointsApp",["ui.router","ngCookies","restangular","ngAnimate"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider",function(e,o,r,t){e.state("main",{url:"/",templateUrl:"main/main.html",controller:"mainController as mainVm"}).state("login",{url:"/login",templateUrl:"login/login.html",controller:"loginController as loginVm"}),o.otherwise("/"),r.html5Mode({enabled:!0,requireBase:!1}),t.interceptors.push("authInterceptor")}]).factory("authInterceptor",["$rootScope","$q","$cookieStore","$location",function(e,o,r,t){return{request:function(e){return e.headers=e.headers||{},r.get("token")&&(e.headers.Authorization="Bearer "+r.get("token")),e},responseError:function(e){return console.group("response error"),console.log(e),console.groupEnd(),401===e.status?(t.path("/login"),r.remove("token"),o.reject(e)):o.reject(e)}}}])}();
!function(e){"use strict";e.factory("AuthService",["$http","$q","$cookieStore","UserService",function(e,r,t,n){function o(){n.getLoggedInUser().then(function(e){s.currentUser=e.user})}function u(){s.currentUser={},t.remove("token")}function c(n){var u=r.defer();return e.post("/auth/local",n).success(function(e){t.put("token",e.token),u.resolve(),o()}).error(function(e){t.remove("token"),u.reject(e)}),u.promise}var s={login:c,logout:u,currentUser:o()};return s}])}(angular.module("HousePointsApp"));
!function(e){"use strict";e.factory("UserService",["Restangular",function(e){function t(){return r.one("me").get()}function n(){return r.getList()}var r=e.all("api/users");return{getLoggedInUser:t,getAllUsers:n}}])}(angular.module("HousePointsApp"));
!function(r){"use strict";r.directive("ajNavbar",function(){return{restrict:"EA",templateUrl:"NavBar/NavBar.html",controller:["AuthService",function(r){var t=this;t.isCollapsed=!0,t.Auth=r}],controllerAs:"navBarVm"}})}(angular.module("HousePointsApp"));
!function(n){"use strict";n.controller("loginController",["AuthService","$state",function(n,o){function t(t,i){t&&n.login(i).then(function(){o.go("main")})}function i(){u.user={email:"",password:""},n.logout()}var u=this;u.user={},u.submit=t,i()}])}(angular.module("HousePointsApp"));
!function(e){"use strict";e.controller("mainController",["UserService",function(e){var n=this;n.message="",e.getLoggedInUser().then(function(e){n.message="Hello "+e.user.name})}])}(angular.module("HousePointsApp"));